(()=>{"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},t=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t,s,n){a(this,e),this.lunarInfo=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448),this.nStr1=new Array("日","一","二","三","四","五","六","七","八","九","十"),this.nStr2=new Array("初","十","廿","三");var i,r,o=0,c=(new Date(parseInt(t),parseInt(s)-1,parseInt(n))-new Date(1900,0,31))/864e5;for(i=1900;i<2050&&c-this.lYearDays(i)>0;i++)c-=this.lYearDays(i);for(this.year=i,r=this.leapMonth(i),this.isLeap=!1,i=1;i<13&&c>0;i++)r>0&&i==r+1&&0==this.isLeap?(--i,o=this.leapDays(this.year)):o=this.monthDays(this.year,i),1==this.isLeap&&i==r+1&&(this.isLeap=!1),c-=o;0==c&&r>0&&i==r+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--i)),c<0&&(c+=o,--i),this.month=i,this.day=c+1}return t(e,[{key:"lYearDays",value:function(e){var t,a=0;for(t=32768;t>8;t>>=1)a+=this.lunarInfo[e-1900]&t?30:29;return a+this.leapDays(e)}},{key:"leapDays",value:function(e){return this.leapMonth(e)?65536&this.lunarInfo[e-1900]?30:29:0}},{key:"leapMonth",value:function(e){return 15&this.lunarInfo[e-1900]}},{key:"monthDays",value:function(e,t){return this.lunarInfo[e-1900]&65536>>t?30:29}},{key:"cDay",value:function(e){var t;switch(e){case 10:t="初十";break;case 20:t="二十";break;case 30:t="三十";break;default:t=this.nStr2[Math.floor(e/10)],t+=this.nStr1[Math.floor(e%10)]}return t}},{key:"cMonth",value:function(e){var t;switch(e){case 1:t="正月";break;case 2:t="二月";break;case 3:t="三月";break;case 4:t="四月";break;case 5:t="五月";break;case 6:t="六月";break;case 7:t="七月";break;case 8:t="八月";break;case 9:t="九月";break;case 10:t="十月";break;case 11:t="十一月";break;case 12:t="十二月"}return t}},{key:"getLunarDay",value:function(){return cMonth(this.month)+cDay(this.day)}},{key:"getLunarDayName",value:function(){return 1==this.day?this.cMonth(this.month):this.cDay(this.day)}},{key:"getLunarDayNum",value:function(){return{day:this.day,month:this.month}}}]),e}(),n=function(){function n(e,t){a(this,n),this._defaultOptions={width:"500px",height:"500px",language:"CH",showLunarCalendar:!0,showHoliday:!0,showFestival:!0,showLunarFestival:!0,showSolarTerm:!0,showMark:!0,timeRange:{startYear:1900,endYear:2049},timeZone:"",mark:{"2016-5-5":"上学"},theme:{changeAble:!1,weeks:{backgroundColor:"#FBEC9C",fontColor:"#4A4A4A",fontSize:"20px"},days:{backgroundColor:"#ffffff",fontColor:"#565555",fontSize:"24px"},todaycolor:"orange",activeSelectColor:"orange",invalidDays:"#C1C0C0"}},this.container=document.querySelector(e),this._defaultOptions.width=this.container.style.offsetWidth,this._defaultOptions.height=this.container.style.offsetHeight,this._options=this.optionAssign(this._defaultOptions,t),this.create()}return t(n,[{key:"optionAssign",value:function(t,a){for(var s in a)"object"!==e(t[s])?t[s]=a[s]:t[s]=this.optionAssign(t[s],a[s]);return t}},{key:"create",value:function(){var e=this.container;e.innerHTML='<div class="sc-header"> </div> <div class="sc-body"> </div>',e.style.width=this._options.width,e.style.height=this._options.height,e.className="sc-calendar";var t=e.querySelector(".sc-header"),a=e.querySelector(".sc-body");t.innerHTML=t.innerHTML+'<div class="sc-actions">      <div class="sc-yleft">        &lsaquo;</div>      <select class="sc-select-year" name="">      </select>      <div class="sc-yright">&rsaquo;</div>  </div>',t.innerHTML=t.innerHTML+'<div class="sc-actions">    <div class="sc-mleft">      &lsaquo;</div>    <select class="sc-select-month" name="">    </select>    <div class="sc-mright">&rsaquo;</div></div>',t.innerHTML=t.innerHTML+'<div class="sc-actions"><span class="sc-return-today ">返回今天</span></div>',t.innerHTML=t.innerHTML+'<div class="sc-actions"><span class="sc-time"></span></div>',a.innerHTML=' <div class="sc-week"> </div> <div class="sc-days"> </div>';for(var s=a.querySelector(".sc-week"),n=a.querySelector(".sc-days"),i=0;i<7;i++)s.innerHTML=s.innerHTML+' <div class="sc-week-item"></div>';for(i=0;i<35;i++)n.innerHTML=n.innerHTML+'<div class="sc-item"><div class="day"></div><div class="lunar-day"></div></div>';this.updateSelect(this.tyear,this.tmonth),this.update(),self.setInterval("SimpleCalendar.timeupdate()",200)}},{key:"update",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.tmonth:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.tyear:arguments[1];this.updateSize(),this.updateWeek(),this.addData(t,e),this.updateHoliday(t,e),this.updateMark(t,e),this.updateFestival(t,e),this.updateEvent(),this.updateTheme(this._options.theme)}},{key:"updateSize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this._options.width:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this._options.height:arguments[1];if(this._options.width=e,this._options.height=t,this.container.style.width=e,this.container.style.height=t,parseInt(e)<500?this.arrayfrom(this.container.querySelectorAll(".sc-actions")).forEach((function(e,t){e.classList.add("sc-actions-big")})):this.arrayfrom(this.container.querySelectorAll(".sc-actions")).forEach((function(e,t){e.classList.remove("sc-actions-big")})),parseInt(t)<400){var a=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=this.arrayfrom(this.container.querySelectorAll(".sc-week-item"));a.forEach((function(e,t){e.querySelector(".day").classList.add("sc-item-small")})),s.forEach((function(e,t){e.classList.add("sc-item-small")}))}else a=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=this.arrayfrom(this.container.querySelectorAll(".sc-week-item")),a.forEach((function(e,t){e.querySelector(".day").classList.remove("sc-item-small")})),s.forEach((function(e,t){e.classList.remove("sc-item-small")}))}},{key:"updateSelect",value:function(e,t){var a=this.container.querySelector(".sc-select-year"),s=this.container.querySelector(".sc-select-month");a.innerHTML="";for(var n=this._options.timeRange.startYear;n<this._options.timeRange.endYear+1;n++)a.innerHTML+='<option value="'+n+'">'+n+"</option>";for(s.innerHTML="",n=0;n<12;n++){var i=this.languageData["months_"+this._options.language];s.innerHTML+='<option value="'+(n+1)+'">'+i[n]+"</option>"}a.value=e,s.value=t}},{key:"updateWeek",value:function(){var e=this.arrayfrom(this.container.querySelectorAll(".sc-week-item")),t=this.languageData["days_"+this._options.language];t||console.error("language error!"),e.forEach((function(e,a){e.innerHTML=t[a]}))}},{key:"addData",value:function(e,t){var a=this.arrayfrom(this.container.querySelectorAll(".sc-item")),n=new Date(e,t-1,1),i=n.getDay();0==i&&(i=7);for(var r=new Date(Date.parse(n)-24*(i-1)*3600*1e3),o=0;o<35;o++){a[o].className="sc-item";var c=new Date(Date.parse(r)+24*o*3600*1e3),l=c.getFullYear(),u=c.getDate(),h=c.getMonth()+1;h!=t&&a[o].classList.add("sc-othermenth"),a[o].querySelector(".day").innerHTML=u,this._options.showLunarCalendar?a[o].querySelector(".lunar-day").innerHTML=new s(l,h,u).getLunarDayName():(a[o].querySelector(".lunar-day").innerHTML="",a[o].classList.add("item-nolunar")),this.tyear==l&&this.tday==u&&this.tmonth==h&&(this.selectDay=a[o],a[o].classList.add("sc-today"))}}},{key:"updateMark",value:function(e,t){var a=this._options;if(a.showMark){var s=this.arrayfrom(this.container.querySelectorAll(".sc-item")),n=t-1,i=a.mark;i&&s.forEach((function(t,a){var s=+t.querySelector(".day").innerHTML;1==s&&n++,i[e+"-"+n+"-"+s]?(t.classList.add("sc-mark"),t.title=i[e+"-"+n+"-"+s]):(t.classList.remove("sc-mark"),t.title="")}))}}},{key:"updateFestival",value:function(e,t){var a=this._options,n=this.arrayfrom(this.container.querySelectorAll(".sc-item")),i=t-1,r=this.languageData["feativals_"+this._options.language],o=this.languageData["lunarFeatival_"+this._options.language],c=this.languageData.solarTerm;r||console.error("language error!"),n.forEach((function(t,n){var l=+t.querySelector(".day").innerHTML;if(1==l&&i++,a.showSolarTerm&&c[i+"-"+l]&&(t.querySelector(".lunar-day").innerHTML=c[i+"-"+l],t.classList.add("sc-festival")),a.showFestival&&r[i+"-"+l]&&(t.querySelector(".lunar-day").innerHTML=r[i+"-"+l],t.classList.add("sc-festival")),o&&a.showLunarFestival){var u=new s(e,i,l).getLunarDayNum();o[u.month+"-"+u.day]&&(t.querySelector(".lunar-day").innerHTML=o[u.month+"-"+u.day],t.classList.add("sc-festival"))}}))}},{key:"updateHoliday",value:function(e,t){if(this._options.showHoliday){var a=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=t-1,n=this.languageData.vocation["data_"+e];n&&a.forEach((function(e,t){var a=+e.querySelector(".day").innerHTML;1==a&&s++,n.indexOf(s+"-"+a)>0&&e.classList.add("sc-vocation")}))}}},{key:"updateTheme",value:function(e){if(this._options.theme.changeAble){var t=e.days,a=e.weeks,s=this.arrayfrom(this.container.querySelectorAll(".sc-week-item")),n=this.arrayfrom(this.container.querySelectorAll(".sc-item"));s.forEach((function(e,t){e.style.backgroundColor=a.backgroundColor,e.style.fontSize=a.fontSize,e.style.color=a.fontColor})),n.forEach((function(a,s){a.classList.contains("sc-today")?a.style.backgroundColor=e.todaycolor:(a.style.backgroundColor=t.backgroundColor,a.querySelector(".day").style.color=t.fontColor),a.querySelector(".day").style.fontSize=t.fontSize})),n.forEach((function(t,a){t.onmouseover=function(t){this.style.borderColor=e.activeSelectColor,this.style.borderWidth="1px"},t.onmouseout=function(e){this.style.borderColor="#F1EBE4",this.style.borderWidth="0 0 1px 1px"}}))}}},{key:"updateEvent",value:function(){var e=this.arrayfrom(this.container.querySelectorAll(".sc-item")),t=this.container,a=this;e.forEach((function(e,s){e.onmouseover=function(e){this.classList.add("sc-active-day")},e.onmouseout=function(e){this.classList.remove("sc-active-day")},e.onclick=function(){a.selectDay=e;var s=t.querySelector(".sc-selected");s&&s.classList.remove("sc-selected"),this.classList.add("sc-selected")}}));var s=t.querySelector(".sc-select-year"),n=t.querySelector(".sc-select-month");s.onchange=function(){var e=n.value,t=this.value;a.update(e,t)},n.onchange=function(){var e=s.value,t=this.value;a.update(t,e)};var i=t.querySelector(".sc-yright"),r=t.querySelector(".sc-yleft"),o=t.querySelector(".sc-mright"),c=t.querySelector(".sc-mleft");i.onclick=function(){var e=s.value;e<2099&&e++,s.value=e,a.update(this.tmonth,e)},r.onclick=function(){var e=s.value;e>1900&&e--,s.value=e,a.update(this.tmonth,e)},o.onclick=function(){var e=n.value,t=s.value;e<12?e++:(e=1,s.value=++t),n.value=e,a.update(e,t)},c.onclick=function(){var e=n.value,t=s.value;e>1?e--:(e=12,s.value=--t),n.value=e,a.update(e,t)},t.querySelector(".sc-return-today").onclick=function(){s.value=a.tyear,n.value=a.tmonth,a.update()}}},{key:"addMark",value:function(e,t){this._options.mark[e]=t,this.update()}},{key:"getSelectedDay",value:function(){var e=this.container.querySelector(".sc-select-year").value,t=this.container.querySelector(".sc-select-month").value,a=this.selectDay.querySelector(".day").innerHTML;return new Date(e,t-1,a)}},{key:"setLenguage",value:function(e){this._options.language=e;var t=this.container.querySelector(".sc-select-year"),a=this.container.querySelector(".sc-select-month");this.updateSelect(t.value,a.value),this.update()}},{key:"showFestival",value:function(e){this._options.showFestival=e,this.update()}},{key:"showHoliday",value:function(e){this._options.showHoliday=e,this.update()}},{key:"showSolarTerm",value:function(e){this._options.showSolarTerm=e,this.update()}},{key:"showLunarFestival",value:function(e){this._options.showLunarFestival=e,this.update()}},{key:"showLunarCalendar",value:function(e){this._options.showLunarCalendar=e,this.update()}},{key:"showMark",value:function(e){this._options.showMark=e,this.update()}},{key:"arrayfrom",value:function(e){var t=[];return[].forEach.call(e,(function(e){t.push(e)})),t}}]),n}();n.timeupdate=function(){var e=document.querySelectorAll(".sc-time"),t=new Date,a=t.getHours(),s=t.getMinutes(),n=t.getSeconds();a<10&&(a="0"+a),s<10&&(s="0"+s),n<10&&(n="0"+n),[].forEach.call(e,(function(e){e.innerHTML="时间："+a+":"+s+":"+n}))},n.prototype.languageData={feativals_CH:{"1-1":"元旦","2-14":"情人节","3-8":"妇女节","3-12":"植树节","4-1":"愚人节","4-22":"地球日","5-1":"劳动节","5-4":"青年节","6-1":"儿童节","7-1":"建党节","8-1":"建军节","9-10":"教师节","10-1":"国庆节","12-25":"圣诞节"},feativals_EN:{"1-1":"new year’s day","2-14":"Saint Valentine's Day","3-8":"international women’s day","3-12":"Arbor Day","4-1":"April Fool's Day","4-22":"Earth Day","5-1":"international labour day","5-4":"Chinese Youth Day","6-1":"Children's Day","7-1":"The party's Day","8-1":"the Army's Day","9-10":"Teachers' Day","10-1":"National Day","12-25":"Christmas Day"},lunarFeatival_CH:{"1-1":"春节","2-2":"龙抬头","1-15":"元宵节","4-4":"寒食节","4-5":"清明节","5-5":"端午节","8-15":"中秋节","9-9":"重阳节","12-30":"除夕"},solarTerm:{"2-3":"立春","5-5":"立夏","8-7":"立秋","11-7":"立冬","2-18":"雨水","5-20":"小满","8-22":"处暑","11-22":"小雪","3-5":"惊蛰","6-5":"芒种","9-7":"白露","12-6":"大雪","3-20":"春分","6-21":"夏至","9-22":"秋分","12-21":"冬至","4-4":"清明","7-6":"小暑","10-8":"寒露","1-5":"小寒","4-19":"谷雨","7-22":"大暑","10-23":"霜降","1-20":"大寒"},days_EN:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],days_CH:["一","二","三","四","五","六","日"],months_EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months_CH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],vocation:{data_2016:["1-1","1-2","1-3","2-7","2-8","2-9","2-10","2-11","2-12","2-13","4-2","4-3","4-4","4-30","5-1","5-2","6-9","6-10","6-11","9-15","9-16","9-17",,"10-1","10-2","10-3","10-4","10-5","10-6","10-7"]}},n.prototype.tyear=(new Date).getFullYear(),n.prototype.tmonth=(new Date).getMonth()+1,n.prototype.tday=(new Date).getDate(),window.SimpleCalendar=n})();